<%= render "layouts/header"%>

<h1>Posts of <%= @user.name%></h1>
<div>
  <% if @user %>
    <div class="flex">
      <div class="borderb">
        <img src=<%= @user.photo %> width=100 height=100>
      </div>
      <div class="borderb flex height110">
        <p><%= @user.name%></p>
        <p>Number of Posts: <%= @user.posts_counter%></p>
      </div>
    </div>
  <% end %>
</div>

<ul>
  <% @posts.each do |post| %>
    <li class="borderb">
      <div class="fit">
        <div><%= link_to post.title, "posts/#{post.id}" %></div></br>
        <%= post.text %>
        <div class="right fontlight">
          <span>Comments: <%= post.comments_counter || 0 %></span>
          <span>Likes: <%= post.likes_counter || 0 %></span>
        </div>
      </div>
    </li>
      <ul class="border flexColumn">
      <% if post.recent_comment.any?%>
        <% post.recent_comment.each do |comment| %>
          <li>
            <%= comment.author.name + ": " + comment.text%>
          </li>
        <% end %>
      <% else %>
        <li>No comments added yet.</li>
      <% end %>
      </ul>
      </br></br>
  <% end %>
</ul>

<%= render "layouts/footer" %>
